### 项目简介

fastify-puppeteer 是一个基于 Fastify 的插件，它集成了 Puppeteer 来提供强大的网页内容转换功能。该插件可以将 HTML 内容或 URL 转换为 PDF 文档或图片，支持单个转换和批量转换操作。

### 主要特性

- HTML 转 PDF：将 HTML 内容直接转换为 PDF 文档
- HTML 转图片：将 HTML 内容转换为图片
- URL 转 PDF：将指定 URL 的网页转换为 PDF 文档
- URL 转图片：将指定 URL 的网页转换为图片
- 批量处理：支持批量转换多个 HTML 内容或 URL
- 并发控制：内置任务队列管理，控制最大并发任务数量
- 缓存机制：支持文件缓存，提高转换效率

### 技术架构

#### 核心组件

- **Fastify 插件**：提供 HTTP 接口和静态文件服务
- **Puppeteer**：负责网页渲染和内容转换
- **任务队列**：管理并发任务，防止系统过载
- **文件缓存**：缓存转换结果，提高响应速度

#### 工作流程

1. 接收转换请求（HTML内容或URL）
2. 通过任务队列管理器控制并发
3. 使用 Puppeteer 打开页面并进行渲染
4. 执行转换操作（PDF或图片）
5. 返回转换结果

### 配置选项

- **maxTaskSize**：最大并发任务数，默认为 100
- **puppeteerOptions**：Puppeteer 启动选项，用于配置浏览器行为
- **cacheOptions**：文件缓存配置，控制缓存行为

### 使用场景

- 网页存档：将网页内容保存为 PDF 文档
- 报表生成：将动态内容转换为 PDF 报表
- 网页截图：捕获网页内容生成图片
- 批量处理：批量转换多个网页或HTML内容
